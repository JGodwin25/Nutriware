<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Document</title>
<link rel="stylesheet" href="css/bootstrap.min.css">
<link rel="stylesheet" href="css/Tables.css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark static-top mb-3">
<div class="container">
<a class="navbar-brand" href="#">Nutriware</a>
<button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
<span class="navbar-toggler-icon"></span>
</button>
<div class="navbar-collapse collapse" id="navbarResponsive" style="">
<ul class="navbar-nav ml-auto">
<li class="nav-item active">
<a class="nav-link" href="index.php">Home
<span class="sr-only">(current)</span>
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="tables.html">Tables</a>
</li>
<li class="nav-item">
<a class="nav-link" href="recipes.html">Recipes</a>
</li>
<!--<li class="nav-item">
<a class="nav-link" href="#">Contact</a>
</li>-->
</ul>
</div>
</div>
</nav>
<div class="container-fluid">
<div class="row">
<div class="col-12 mt-3">
<h5 class="food-info">Food Name : <span class="food-info-span">--/--</span></h5>
</div>
<div class="col-12 mt-3">
<div class="input-group">
    <input id="food-qty" class="form-control border-secondary py-2" type="search" placeholder="Enter food quantity">
    <div class="input-group-append">
        <button class="btn btn-outline-secondary" type="button">
            <i class="glyphicon glyphicon-search"></i>
        </button>
    </div>
</div> 
</div>
<div class="col-12 col-xs-6 col-sm-6 col-md-4 col-lg-3 mt-3">
<div class="card">
<h5 class="card-header">Featured</h5>
<div class="card-body">
<p class="card-text">
        <h5>Moisture : <span class="food-info-1">--/--</span></h5>
        <h5>Protien : <span class="food-info-2">--/--</span></h5>
        <h5>Ash : <span class="food-info-3">--/--</span></h5>
        <h5>Total Fat : <span class="food-info-4">--/--</span></h5>
</p>
</div>
</div>
</div>
<div class="col-12 col-xs-6 col-sm-6 col-md-4 col-lg-3 mt-3">
<div class="card">
<h5 class="card-header">Dietary Fibre</h5>
<div class="card-body">
<p class="card-text">
        <h5>Total : <span class="food-info-5">--/--</span></h5>
        <h5>Insolble : <span class="food-info-6">--/--</span></h5>
        <h5>Slouble : <span class="food-info-7">--/--</span></h5>
</p>
</div>
</div>
</div>
<div class="col-12 col-sm-6 col-md-4 col-lg-3 mt-3 mb-3">
<div class="card">
<h5 class="card-header">Dietary Fibre</h5>
<div class="card-body">
<p class="card-text">
        <h5>Carbohydrates : <span class="food-info-8">--/--</span></h5>
        <h5>Energy : <span class="food-info-9">--/--</span></h5>
</p>
</div>
</div>
</div>
</div>
<div class="row mt-3">
<div class="col-xs-6 col-sm-3 col-md-3 col-lg-3">
<h4>
    <div class="dropdown">
        <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Select Category
        </a>
        
        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
            <a class="dropdown-item" href="#">Action</a>
            <a class="dropdown-item" href="#">Another action</a>
            <a class="dropdown-item" href="#">Something else here</a>
        </div>
    </div>
    
</h4>
</div>
<div class="col-xs-6 col-sm-3 col-md-3 col-lg-3">
<button class="btn btn-secondary NVT-ShowAll">Show All</button>
</div>

<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="input-group">
            <input id="NV-Search" class="form-control border-secondary py-2" type="search" placeholder="search food">
            <div class="input-group-append">
                <button class="btn btn-outline-secondary" type="button">
                    <i class="glyphicon glyphicon-search"></i>
                </button>
            </div>
        </div>
</div>
</div>
<!--Row Values-->
<div class="row"></div>

<div class="row mt-3">
<div class="col-sm-12 col-md-12">
<table class="table table-bordered NV-Table table-responsive">
<thead class="thead-dark NV-Thead">
    <tr class="">
    <th scope="col">Food Name</th>
    <th scope="col">Moisture</th>
    <th scope="col">Protien</th>
    <th scope="col">Ash</th>
    <th scope="col">Total Fat</th>
    <th class="colspan-center" scope="col" colspan="3">Dietary Fibre</th>
    <th scope="col">Carbohydrates</th>
    <th scope="col">Energy</th>
    </tr>
    <tr>
    <th scope="col" colspan="5"></th>
    <th scope="col">Total</th>
    <th scope="col">Insoluble</th>
    <th scope="col">Soluble</th>
    <th scope="col" colspan="2"></th>
    </tr>
</thead>
<tbody class="NV-Tbody">
    <!--<tr>
    <th scope="row">1</th>
    <td>Mark</td>
    <td>Otto</td>
    <td>@mdo</td>
    </tr>-->
</tbody>
</table>
</div>
</div>

</div>
<script src="scripts/jquery-1.12.4.min.js"></script>
<script>
var foodDetails=[];
$.post('http://localhost:8080/PHP/JTRead.php',function(data){
var data=JSON.parse(data);
console.log(data[0][1]);
var table=$('.NV-Table');
var thead=$('.NV-Thead');
var tbody=$('.NV-Tbody');

for(i=2;i<data.length;i++){
var tr=document.createElement('tr');
tr.setAttribute("NV-Data",data[i][0]);
for(j=0;j<data[i].length;j++){
var td=document.createElement('td');
td.innerHTML=data[i][j];
tr.appendChild(td);
}
tbody.append(tr);
}
});
$('#NV-Search').keyup(function(){
$('.NVT-ShowAll').click();
var searchText=$(this).val();
alert(searchText);
$('.NV-Tbody tr').each(function(){
var trData=$(this).attr("nv-data");
if((trData!=null)&&(trData.toLowerCase().indexOf(searchText.toLowerCase())>=0)){
    console.log(trData);
}else{
    $(this).addClass('hidden');
}

});
});
$('.NVT-ShowAll').click(function(){
    $('.NV-Tbody tr').removeClass('hidden');
});
$('.NV-Table tbody').on('click','tr',function(){
$('.NV-Table tbody tr').removeClass('tr-selected');
$(this).addClass("tr-selected");
foodDetails=[];
$('.tr-selected td').each(function(){
foodDetails.push($(this).text());
});
console.log(foodDetails);
$('.food-info-span').html(foodDetails[0]);
for(i=1;i<foodDetails.length;i++){
var strtonum=parseFloat(foodDetails[i]);
strtonum=strtonum/100;
var str=strtonum.toString().split(".");
if(str[1].length>7){
    str[1]=str[1].substring(0,5);
}
str=str.join(".");
var strtonum=parseFloat(str);
$('.food-info-'+i).html(strtonum);

console.log('.food-info-'+i+"  "+foodDetails[i]);
}
});
$('#food-qty').keyup(function(){
for(i=1;i<foodDetails.length;i++){
var strtonum=parseFloat(foodDetails[i]);
strtonum=strtonum/100;
var qty=(Number)($('#food-qty').val());
strtonum=strtonum*qty;
var str=strtonum.toString().split(".");
if(str[1].length>7){
str[1]=str[1].substring(0,5);
}
str=str.join(".");
var strtonum=parseFloat(str);
$('.food-info-'+i).html(strtonum);
}
});
</script>
</body>
</html>